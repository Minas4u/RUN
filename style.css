body {
            font-family: 'Ubuntu', sans-serif;
            background-color: #f0f4f8;
            color: #1e293b;
        }
        .main-container {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            width: 100%;
            max-width: 64rem; /* 1024px */
            padding: 1.5rem;
            margin-left: auto;
            margin-right: auto;
        }
        @media (min-width: 640px) {
            .main-container {
                padding: 2rem;
            }
        }
        .nav-button {
            padding: 0.6rem 1.1rem;
            border-radius: 0.375rem;
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            font-weight: 600;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .nav-button:hover:not(.active-overview):not(.active-plan):not(.active-calendar):not(.active-race):not(.active-info):not(.active-companion) {
            background-color: #f3f4f6;
            color: #1f2937;
        }

        .nav-button.active-overview { background-color: #0284c7; color: white; }
        .nav-button.active-overview:hover { background-color: #0369a1; }

        .nav-button.active-plan { background-color: #f59e0b; color: white; }
        .nav-button.active-plan:hover { background-color: #d97706; }

        .nav-button.active-calendar { background-color: #059669; color: white; }
        .nav-button.active-calendar:hover { background-color: #047857; }

        .nav-button.active-race { background-color: #7c3aed; color: white; }
        .nav-button.active-race:hover { background-color: #6d28d9; }

        .nav-button.active-info { background-color: #6366f1; color: white; }
        .nav-button.active-info:hover { background-color: #4f46e5; }

        .nav-button.active-companion { background-color: #10b981; color: white; }
        .nav-button.active-companion:hover { background-color: #047857; }


        .phase-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            border-width: 1px;
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            font-weight: 500;
        }
        .phase-button-preseason { border-color: #d1d5db; color: #4b5563; }
        .phase-button-preseason:hover:not(.active) { background-color: #f3f4f6; }
        .phase-button-preseason.active { background-color: #6b7280; color: white; border-color: #6b7280; }

        .phase-button-base { border-color: #0ea5e9; color: #0369a1; }
        .phase-button-base:hover:not(.active) { background-color: #e0f2fe; }
        .phase-button-base.active { background-color: #0ea5e9; color: white; }

        .phase-button-specific { border-color: #10b981; color: #047857; }
        .phase-button-specific:hover:not(.active) { background-color: #d1fae5; }
        .phase-button-specific.active { background-color: #059669; color: white; border-color: #059669; }

        .phase-button-taper { border-color: #ef4444; color: #b91c1c; }
        .phase-button-taper:hover:not(.active) { background-color: #fee2e2; }
        .phase-button-taper.active { background-color: #dc2626; color: white; border-color: #dc2626; }

        .week-button {
            padding: 0.5rem 0.75rem; border-radius: 0.375rem; border: 1px solid #9ca3af;
            font-weight: 500; text-align: center;
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, border-color 0.2s ease-in-out;
        }
        .week-button.active {
            background-color: #0284c7;
            color: white !important;
            border-color: #0284c7;
        }

        .week-button-text-preseason { color: #4b5563; }
        .week-button-text-preseason:not(.active):hover { background-color: #f3f4f6; border-color: #9ca3af; }

        .week-button-text-base { color: #0369a1; }
        .week-button-text-base:not(.active):hover { background-color: #e0f2fe; border-color: #7dd3fc; }

        .week-button-text-specific { color: #047857; }
        .week-button-text-specific:not(.active):hover { background-color: #d1fae5; border-color: #6ee7b7;}

        .week-button-text-taper { color: #b91c1c; }
        .week-button-text-taper:not(.active):hover { background-color: #fee2e2; border-color: #fca5a5;}

        .content-card {
            background-color: #fafaf9;
            padding: 1rem;
            border-radius: 0.5rem;
        }
        .content-card h3.phase-title-style { margin-bottom: 0.5rem; }

        .overview-section-card { /* Base for most cards not getting custom rect border */
            border-left-width: 4px;
            border-bottom-width: 4px;
            border-left-color: #0284c7;
            border-bottom-color: #f59e0b;
        }
        .news-section-card {
            border-left-width: 4px;
            border-bottom-width: 4px;
            border-left-color: #4f46e5;
            border-bottom-color: #059669;
        }
        .race-section-card {
            border-left-width: 4px;
            border-bottom-width: 4px;
            border-left-color: #7c3aed;
            border-bottom-color: #db2777;
        }

        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .data-table { width: 100%; margin-top: 0.5rem; border-collapse: collapse; font-size: 0.875rem; }
        .data-table th, .data-table td { border: 1px solid #d1d5db; padding: 0.5rem; text-align: left; }
        .data-table th { font-weight: 600; background-color: #f3f4f6; }
        .schedule-table { width: 100%; margin-top: 0.75rem; border-collapse: collapse; font-size: 0.875rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; overflow: hidden; }
        .schedule-table th, .schedule-table td { padding: 0.75rem; text-align: left; border-bottom: 1px solid #e5e7eb; }
        .schedule-table th { background-color: #f9fafb; color: #374151; font-weight: 600; }
        .schedule-table tr:last-child td { border-bottom: none; }
        .schedule-table td:first-child { font-weight: 500; width: 25%; max-width: 100px; }

        #userIdInput {
            border-width: 2px;
            border-color: #f59e0b;
        }
        #userIdInput:focus {
            outline: 2px solid transparent; outline-offset: 2px; border-color: #d97706;
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.3);
        }
        label[for="userIdInput"] {
            border-left-width: 4px;
            border-color: #0284c7;
            padding-left: 0.5rem;
        }
        #loginButton {
            border-radius: 9999px;
        }

        input[type="text"]:not(#userIdInput):focus,
        input[type="number"]:focus,
        input[type="date"]:focus {
            outline: 2px solid transparent; outline-offset: 2px;
            border-color: #0ea5e9;
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.3);
        }

        .css-logo-dna {
            font-family: 'Ubuntu', sans-serif;
            font-weight: 700;
            font-size: 3.75rem;
            line-height: 1;
            text-align: center;
            padding: 0.5rem 0.75rem;
            display: inline-block;
            border-top: 3px solid #f59e0b;
            border-right: 3px solid #0284c7;
            border-bottom: 3px solid #0284c7;
            border-left: 3px solid #f59e0b;
            margin-bottom: 0.75rem;
        }
        @media (min-width: 640px) {
            .css-logo-dna {
                font-size: 4.5rem;
                padding: 0.75rem 1rem;
            }
        }
        .css-logo-dna .logo-d {
            color: #0284c7;
        }
        .css-logo-dna .logo-n {
            background: linear-gradient(to bottom, #0284c7 50%, #f59e0b 50%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-block;
        }
        .css-logo-dna .logo-a {
            color: #f59e0b;
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        #loading-message, #error-message, #login-error-message { text-align: center; padding: 2rem; font-size: 1.125rem; font-weight: 500; }
        #loading-message { color: #0369a1; }
        #error-message, #login-error-message { color: #dc2626; background-color: #fee2e2; border: 1px solid #f87171; border-radius: 0.5rem; }

        #installPwaButton {
            background-color: #0284c7;
            color: white;
            font-weight: 600;
            border: 2px solid #f59e0b;
        }
        #installPwaButton:hover {
            background-color: #0369a1;
            border-color: #d97706;
        }

        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background-color: #e5e7eb; border: 1px solid #e5e7eb; }
        .calendar-header {
            text-align: center;
            padding: 0.5rem;
            background-color: #e0e7ff;
            font-weight: 600;
            font-size: 0.875rem;
            color: #3730a3;
            border: 1px solid #c7d2fe;
        }
        .calendar-day { background-color: #fff; padding: 0.5rem; min-height: 100px; font-size: 0.75rem; border: 1px solid #f3f4f6; cursor: default; }
        .calendar-day.has-activity { cursor: pointer; }
        .calendar-day.has-activity:hover { background-color: #f0f9ff; }
        .calendar-day.other-month { background-color: #f9fafb; color: #9ca3af; cursor: default;}
        .calendar-day.other-month:hover { background-color: #f9fafb; }
        .calendar-day.is-today { background-color: #ecfdf5; border: 2px solid #10b981; }
        .calendar-day .day-number { font-weight: 600; margin-bottom: 0.25rem; display: block; }

        .activity-thumbnail {
            display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
            padding: 0.25rem; border-radius: 0.25rem; margin-top: 0.25rem;
            font-size: 0.7rem;
        }
        .activity-thumbnail-easy { background-color: #e0f2fe; color: #0c4a6e; }
        .activity-thumbnail-easy-green { background-color: #dcfce7; color: #15803d; }
        .activity-thumbnail-fartlek { background-color: #fee2e2; color: #b91c1c; }
        .activity-thumbnail-tempo { background-color: #ffedd5; color: #c2410c; }
        .activity-thumbnail-interval { background-color: #fecaca; color: #991b1b; }
        .activity-thumbnail-long { background-color: #f3e8ff; color: #7e22ce; }
        .activity-thumbnail-race { background-color: #fce7f3; color: #be185d; }
        .activity-thumbnail-rest { background-color: #f1f5f9; color: #475569; }
        .activity-thumbnail-default { background-color: #e0f2fe; color: #0c4a6e; }

        .custom-rect-border-nav { /* For nav tabs */
            border-top: 3px solid #f59e0b;    /* Yellow */
            border-right: 3px solid #0284c7;    /* Blue */
            border-bottom: 3px solid #0284c7; /* Blue */
            border-left: 3px solid #f59e0b;    /* Yellow */
            padding: 0.75rem !important; /* Unified padding */
            border-style: solid !important;
        }
        .custom-rect-border-today { /* For today's training card */
            border-top: 3px solid #f59e0b !important;    /* Yellow */
            border-right: 3px solid #0284c7 !important;    /* Blue */
            border-bottom: 3px solid #0284c7 !important; /* Blue */
            border-left: 3px solid #f59e0b !important;    /* Yellow */
            border-style: solid !important;
        }
        .custom-rect-border-this-week { /* For this week's plan card */
            border-top: 3px solid #15803d !important;    /* Green */
            border-left: 3px solid #15803d !important;    /* Green */
            border-bottom: 3px solid #dc2626 !important; /* Red */
            border-right: 3px solid #dc2626 !important;  /* Red */
            border-style: solid !important;
        }

        .main-title {
            font-weight: 800;
            letter-spacing: -0.025em;
        }
        .title-project {
            color: #f59e0b;
        }
        .title-marathon {
            color: #0284c7;
        }

        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 10px auto;
        }
        .pdf-button {
            background-color: #f43f5e;
            color: white;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 9999px;
            font-weight: 500;
            transition: background-color 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }
        .pdf-button:hover {
            background-color: #e11d48;
        }
        .pdf-button svg {
            width: 0.875rem;
            height: 0.875rem;
        }
        .calendar-nav-button {
            background-color: #0284c7;
            color: white;
            padding: 0.5rem 0.75rem;
            border-radius: 9999px;
            transition: background-color 0.2s ease-in-out;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            height: 2.5rem;
        }
        .calendar-nav-button:hover {
            background-color: #0369a1;
        }
        .calendar-nav-button svg {
            width: 1.25rem;
            height: 1.25rem;
        }

        #toggleRepeatsButton, #toggleZonesButton {
            background-color: #0284c7;
            color: white;
            border: 2px solid #f59e0b;
            padding: 0.4rem 0.9rem;
            font-size: 0.9rem;
            font-weight: 600;
            border-radius: 0.375rem;
            transition: background-color 0.2s, border-color 0.2s;
        }
        #toggleRepeatsButton:hover, #toggleZonesButton:hover {
            background-color: #0369a1;
            border-color: #d97706;
        }

        /* Today's Training Card - Activity Text Color Classes */
        .activity-text-easy, .pace-text-easy { color: #16a34a !important; }
        .activity-text-recovery, .pace-text-recovery { color: #075985 !important; }
        .activity-text-base, .pace-text-base { color: #1e40af !important; }
        .activity-text-tempo, .pace-text-tempo { color: #b45309 !important; }
        .activity-text-interval, .activity-text-intervals, .pace-text-interval, .pace-text-intervals { color: #991b1b !important; }
        .activity-text-fartlek, .pace-text-fartlek { color: #831843 !important; }
        .activity-text-str, .activity-text-hills, .pace-text-str, .pace-text-hills { color: #713f12 !important; }
        .activity-text-rest, .pace-text-rest { color: #374151 !important; }
        .activity-text-zone, .activity-text-race, .pace-text-zone, .pace-text-race { color: #5b21b6 !important; }
        .activity-text-double, .pace-text-double { color: #78350f !important; }
        .activity-text-mobility, .pace-text-mobility { color: #713f12 !important; }

        .highlight-zone-pace {
            background-color: #f59e0b !important;
            color: #1e293b !important;
            font-weight: bold !important;
        }

        /* --- Companion App Styles --- */
        .companion-nav-button {
            padding: 0.6rem 1.1rem;
            border-radius: 0.375rem;
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            font-weight: 600;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            cursor: pointer;
        }
        .companion-nav-button:hover:not(.active) {
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .companion-nav-button.active.drills { background-color: #059669; color: white; }
        .companion-nav-button.active.mobility { background-color: #0ea5e9; color: white; }
        .companion-nav-button.active.strength { background-color: #f59e0b; color: white; }

        .exercise-card {
            background-color: #fff;
            border-radius: 0.5rem;
            padding: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .exercise-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
        }
        .exercise-card h3 {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        .exercise-card .details {
            font-weight: 500;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            display: inline-block;
        }
        .details-drills { background-color: #dcfce7; color: #166534; }
        .details-mobility { background-color: #e0f2fe; color: #075985; }
        .details-strength { background-color: #fef3c7; color: #92400e; }
        .video-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: #0ea5e9;
            font-weight: 500;
            text-decoration: none;
            transition: color 0.2s;
        }
        .video-link:hover {
            color: #0284c7;
        }
        .updates-card {
            border-left-width: 4px;
            border-left-color: #6366f1;
        }

        /* --- Updates Modal --- */
        #updates-modal .updates-modal-content-wrapper {
            background-color: #f8fafc; /* A very light blue/gray */
            border-radius: 0.75rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 36rem; /* 576px */
            padding: 1.5rem;
            position: relative;
            max-height: 80vh; /* Make it scrollable if content is long */
            overflow-y: auto;
        }
        #updates-modal .updates-modal-content-wrapper h2 {
            background: linear-gradient(to right, #4f46e5, #7c3aed);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        #close-updates-modal-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            color: #9ca3af;
            background-color: #f3f4f6;
            border-radius: 9999px;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease-in-out;
            z-index: 10;
        }
        #close-updates-modal-btn:hover {
            color: #1f2937;
            background-color: #e5e7eb;
            transform: rotate(90deg);
        }
        #updates-modal .updates-card {
            border-left-width: 4px;
            border-left-color: #6366f1;
            background-color: #ffffff;
            padding: 1rem;
            border-radius: 0.5rem;
        }

        @media print {
            body {
                background-color: white !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            body * {
                visibility: hidden !important;
            }

            #print-section-container {
                display: block !important;
                visibility: visible !important;
                position: static !important;
            }

            #print-section-container .currently-printing-this-week,
            #print-section-container .currently-printing-this-week * {
                visibility: visible !important;
            }

            #print-section-container .currently-printing-this-week {
                position: relative !important;
                width: auto !important;
                margin: 20px !important;
                padding: 0 !important;
                background-color: white !important;
                font-size: 11pt !important;
                box-shadow: none !important;
                border: none !important;
            }

            #print-section-container .currently-printing-this-week h4,
            #print-section-container .currently-printing-this-week p,
            #print-section-container .currently-printing-this-week strong,
            #print-section-container .currently-printing-this-week .schedule-table th,
            #print-section-container .currently-printing-this-week .schedule-table td,
            #print-section-container .currently-printing-this-week .text-xs
             {
                color: black !important;
                background-color: white !important;
            }

            #print-section-container .currently-printing-this-week .schedule-table {
                width: 100% !important;
                border-collapse: collapse !important;
                margin-top: 0.5rem !important;
                page-break-inside: avoid !important;
            }
            #print-section-container .currently-printing-this-week .schedule-table th,
            #print-section-container .currently-printing-this-week .schedule-table td {
                border: 1px solid #cccccc !important;
                padding: 0.4rem !important;
                text-align: left !important;
            }
             #print-section-container .currently-printing-this-week .schedule-table th {
                font-weight: bold !important;
                background-color: #f0f0f0 !important;
             }
             #print-section-container .currently-printing-this-week .schedule-table tr {
                page-break-inside: avoid !important;
                page-break-after: auto !important;
             }
            #print-section-container .currently-printing-this-week .schedule-table td:first-child {
                 font-weight: bold !important;
            }

            #print-section-container .currently-printing-this-week p.italic {
                margin-top: 0.75rem !important;
                padding: 0.5rem !important;
                border: 1px solid #dddddd !important;
                border-radius: 0.25rem !important;
            }
             #print-section-container .currently-printing-this-week .text-sky-700 { color: black !important; }


            .no-print,
            .pdf-button,
            .nav-button,
            body > header,
            body > nav,
            #login-container,
            #main-app-wrapper > header,
            #main-app-wrapper > nav,
            #calendar-controls,
            .calendar-grid,
            #this-weeks-plan-card,
            #mileage-chart-modal,
            #updates-modal,
            #training-plan-content .chart-container,
            .chart-container p,
            #calendar-selected-day-header,
            #raceElevationChartContainer,
            #phase-navigation,
            #phase-details > .content-card > h3:not(.phase-title-style),
            #phase-details > .content-card > hr,
            #phase-details > .content-card > p,
            #phase-details > .content-card > h4:not(:first-child),
            #phase-details .week-button,
            #training-plan-content > div:first-child:not(#week-details-container)
             {
                display: none !important;
                visibility: hidden !important;
            }
        }
        .today-pace-table {
            width: 100%;
            margin-top: 0.5rem;
            border-collapse: collapse;
            font-size: 0.875rem;
        }
        .today-pace-table th, .today-pace-table td {
            border: 1px solid #000000;
            padding: 0.3rem 0.5rem;
            text-align: left;
        }
        .today-pace-table th {
            background-color: #f3f4f6;
            font-weight: 500;
        }
        .today-pace-table th.header-zone { color: #1f2937; }
        .today-pace-table th.header-pace { color: #1f2937; }
        .today-pace-table th.header-low { color: #2563eb; }
        .today-pace-table th.header-average { color: #16a34a; }
        .today-pace-table th.header-high { color: #dc2626; }

        .today-pace-table td {
            font-weight: 600;
        }
        .today-pace-table td:first-child {
            font-weight: 500;
        }

        .todays-activity-box {
            padding: 0.75rem;
            border-radius: 0.375rem;
            margin-top: 0.5rem;
            border: 1px solid #e5e7eb;
            background-color: #ffffff;
        }
        .todays-activity-box p strong.activity-text {
            font-weight: 600;
            font-size: 1.25rem;
            line-height: 1.6;
            color: #0369a1; /* Default color, will be overridden by specific classes below */
        }
        .todays-weekly-notes-box {
            border: 1px solid #e5e7eb;
            background-color: #f9fafb;
            padding: 0.75rem;
            border-radius: 0.375rem;
            margin-top: 0.5rem;
        }

        @media (max-width: 639px) {
            .calendar-day {
                min-height: 40px;
                padding: 0.25rem;
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
            }
            .calendar-day .day-number {
                font-size: 0.875rem;
                margin-bottom: 0;
            }
            .calendar-day .activity-thumbnail {
                display: none;
            }
            .calendar-day.activity-thumbnail-fartlek { background-color: #ffd9d9; color: #990000 !important; }
            .calendar-day.activity-thumbnail-easy-green { background-color: #d9ffd9; color: #006400 !important; }
            .calendar-day.activity-thumbnail-interval { background-color: #fee2e2; color: #b91c1c !important; }
            .calendar-day.activity-thumbnail-easy { background-color: #e0f2fe; color: #0c4a6e !important; }
            .calendar-day.activity-thumbnail-tempo { background-color: #ffedd5; color: #c2410c !important; }
            .calendar-day.activity-thumbnail-long { background-color: #f3e8ff; color: #7e22ce !important; }
            .calendar-day.activity-thumbnail-race { background-color: #fce7f3; color: #be185d !important; }
            .calendar-day.activity-thumbnail-rest { background-color: #f1f5f9; color: #475569 !important; }
            .calendar-day.activity-thumbnail-default { background-color: #e0f2fe; color: #0c4a6e !important; }

            .calendar-day.is-today .day-number {
                color: #065f46;
            }
             .calendar-day.has-activity .day-number {
                mix-blend-mode: difference;
                filter: invert(1) grayscale(1) contrast(100);
            }
        }
